
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(window.jQuery)}}(function(f){var b=f.summernote.renderer.getTemplate();var a=f.summernote.core.range;var g=f.summernote.core.dom;var h=function(o,u){var x=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;var k=o.match(x);var j=/\/\/instagram.com\/p\/(.[a-zA-Z0-9]*)/;var C=o.match(j);var v=/\/\/vine.co\/v\/(.[a-zA-Z0-9]*)/;var l=o.match(v);var q=/\/\/(player.)?vimeo.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/;var w=o.match(q);var m=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/;var i=o.match(m);var B=/\/\/v\.youku\.com\/v_show\/id_(\w+)\.html/;var z=o.match(B);var y=/^.+.(mp4|m4v|mov)$/;var t=o.match(y);var s=/^.+.(ogg|ogv)$/;var D=o.match(s);var A=/^.+.(webm)$/;var p=o.match(A);var r;if(k&&k[1].length===11){var n=k[1];r=f("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+n).attr("width","640").attr("height","360")}else{if(C&&C[0].length){r=f("<iframe>").attr("frameborder",0).attr("src",C[0]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true")}else{if(l&&l[0].length){r=f("<iframe>").attr("frameborder",0).attr("src",l[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed")}else{if(w&&w[3].length){r=f("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+w[3]).attr("width","640").attr("height","360")}else{if(i&&i[2].length){r=f("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+i[2]).attr("width","640").attr("height","360")}else{if(z&&z[1].length){r=f("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+z[1])}else{if(t||D||p){r=f("<video controls preload>").attr("src",o).attr("poster",u).attr("width","100%").attr("height","auto")}else{return false}}}}}}}return r[0]};var d=function(j){j.focus();var i=a.create();if(i.isOnAnchor()){var k=g.ancestor(i.sc,g.isAnchor);i=a.createFromNode(k)}return i.toString()};var e=function(j,i){j.toggleClass("disabled",!i);j.attr("disabled",!i)};var c=function(i,j,k){return f.Deferred(function(n){var l=j.find(".note-video-dialog");var o=l.find(".note-video-url"),p=l.find(".note-video-btn");var m=[];l.one("shown.bs.modal",function(){o.val(k).on("input",function(){e(p,o.val())}).trigger("focus");p.click(function(q){q.preventDefault();if(m.video!==undefined){n.resolve(m)}else{n.resolve(o.val())}l.modal("hide")});f(".jbkfilemanager.poster").jassets({success:function(q,r){m.poster=q.src;if(m.video!==undefined){e(p,true)}}});f(".jbkfilemanager.video").jassets({success:function(q,r){m.video=q.src;if(m.poster!==undefined){e(p,true)}}})}).one("hidden.bs.modal",function(){o.off("input");p.off("click");if(n.state()==="pending"){n.reject()}}).modal("show")})};f.summernote.addPlugin({name:"video",buttons:{video:function(i){return b.iconButton("fa fa-youtube-play",{event:"showVideoDialog",title:i.video.video,hide:true})}},dialogs:{video:function(j){var i='<div class="form-group row-fluid"><a class="btn btn-primary jbkfilemanager video" data-type="video">Video</a> <a class="btn btn-primary jbkfilemanager poster" data-type="poster">Poster</a> <br /><br /><label>'+j.video.url+' <small class="text-muted">'+j.video.providers+'</small></label><input class="note-video-url form-control span12" type="text" /></div>';var k='<button href="#" class="btn btn-primary note-video-btn disabled" disabled>'+j.video.insert+"</button>";return b.dialog("note-video-dialog",j.video.insert,i,k)}},events:{showVideoDialog:function(k,j,m){var l=m.dialog(),i=m.editable(),n=d(i);j.saveRange(i);c(i,l,n).then(function(p){if(p.video!==undefined){var q=p.poster;var p=p.video}j.restoreRange(i);var o=h(p,q);if(o){j.insertNode(i,o)}}).fail(function(){j.restoreRange(i)})}},langs:{"en-US":{video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"}},"ar-AR":{video:{video:"فيديو",videoLink:"رابط الفيديو",insert:"إدراج الفيديو",url:"رابط الفيديو",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion ou Youku)"}},"ca-ES":{video:{video:"Video",videoLink:"Enllaç del video",insert:"Inserir video",url:"URL del video?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion, o Youku)"}},"cs-CZ":{video:{video:"Video",videoLink:"Odkaz videa",insert:"Vložit video",url:"URL videa?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion nebo Youku)"}},"da-DK":{video:{video:"Video",videoLink:"Video Link",insert:"Indsæt Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion eller Youku)"}},"de-DE":{video:{video:"Video",videoLink:"Video Link",insert:"Video einfügen",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion, oder Youku)"}},"es-ES":{video:{video:"Video",videoLink:"Link del video",insert:"Insertar video",url:"¿URL del video?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion, o Youku)"}},"es-EU":{video:{video:"Bideoa",videoLink:"Bideorako esteka",insert:"Bideo berri bat txertatu",url:"Bideoaren URL helbidea",providers:"(YouTube, Vimeo, Vine, Instagram, edo DailyMotion)"}},"fa-IR":{video:{video:"ویدیو",videoLink:"لینک ویدیو",insert:"افزودن ویدیو",url:"آدرس ویدیو ؟",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion, یا Youku)"}},"fi-FI":{video:{video:"Video",videoLink:"Linkki videoon",insert:"Lisää video",url:"Videon URL-osoite?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion tai Youku)"}},"fr-FR":{video:{video:"Vidéo",videoLink:"Lien vidéo",insert:"Insérer une vidéo",url:"URL de la vidéo",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion ou Youku)"}},"he-IL":{video:{video:"סרטון",videoLink:"קישור לסרטון",insert:"הוסף סרטון",url:"קישור לסרטון",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion או Youku)"}},"hu-HU":{video:{video:"Videó",videoLink:"Videó hivatkozás",insert:"Videó beszúrása",url:"Videó URL címe",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion, vagy Youku)"}},"id-ID":{video:{video:"Video",videoLink:"Link video",insert:"Sisipkan video",url:"Tautan video",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion, atau Youku)"}},"it-IT":{video:{video:"Video",videoLink:"Collegamento ad un Video",insert:"Inserisci Video",url:"URL del Video",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion o Youku)"}},"ja-JP":{video:{video:"動画",videoLink:"動画リンク",insert:"動画挿入",url:"動画のURL",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion, Youku)"}},"ko-KR":{video:{video:"동영상",videoLink:"동영상 링크",insert:"동영상 추가",url:"동영상 URL",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion, Youku 사용 가능)"}},"nb-NO":{video:{video:"Video",videoLink:"Videolenke",insert:"Sett inn video",url:"Video-URL",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion eller Youku)"}},"nl-NL":{video:{video:"Video",videoLink:"Video link",insert:"Video invoegen",url:"URL van de video",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion of Youku)"}},"pl-PL":{video:{video:"Wideo",videoLink:"Adres wideo",insert:"Wstaw wideo",url:"Adres wideo",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion, lub Youku)"}},"pt-BR":{video:{video:"Vídeo",videoLink:"Link para vídeo",insert:"Inserir vídeo",url:"URL do vídeo?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion, ou Youku)"}},"ro-RO":{video:{video:"Video",videoLink:"Link video",insert:"Inserează video",url:"URL video?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion, sau Youku)"}},"ru-RU":{video:{video:"Видео",videoLink:"Ссылка на видео",insert:"Вставить видео",url:"URL видео",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion или Youku)"}},"sk-SK":{video:{video:"Video",videoLink:"Odkaz videa",insert:"Vložiť video",url:"URL videa?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion nebo Youku)"}},"sl-SI":{video:{video:"Video",videoLink:"Video povezava",insert:"Vstavi video",url:"Povezava do videa",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion ali Youku)"}},"sr-RS":{video:{video:"Видео",videoLink:"Веза ка видеу",insert:"Уметни видео",url:"URL видео",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion или Youku)"}},"sr-RS-Latin":{video:{video:"Video",videoLink:"Veza ka videu",insert:"Umetni video",url:"URL video",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion ili Youku)"}},"sv-SE":{video:{video:"Filmklipp",videoLink:"Länk till filmklipp",insert:"Infoga filmklipp",url:"Länk till filmklipp",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion eller Youku)"}},"th-TH":{video:{video:"วีดีโอ",videoLink:"ลิงก์ของวีดีโอ",insert:"แทรกวีดีโอ",url:"ที่อยู่ URL ของวีดีโอ?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion หรือ Youku)"}},"tr-TR":{video:{video:"Video",videoLink:"Video bağlantısı",insert:"Video ekle",url:"Video bağlantısı?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion veya Youku)"}},"uk-UA":{video:{video:"Відео",videoLink:"Посилання на відео",insert:"Вставити відео",url:"URL відео",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion чи Youku)"}},"vi-VN":{video:{video:"Video",videoLink:"Đường Dẫn đến Video",insert:"Chèn Video",url:"URL",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion và Youku)"}},"zh-CN":{video:{video:"视频",videoLink:"视频链接",insert:"插入视频",url:"视频地址",providers:"(优酷, Instagram, DailyMotion, Youtube等)"}},"zh-TW":{video:{video:"影片",videoLink:"影片連結",insert:"插入影片",url:"影片網址",providers:"(優酷, Instagram, DailyMotion, Youtube等)"}}}})}));